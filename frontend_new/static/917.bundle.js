"use strict";(self.webpackChunkvmms=self.webpackChunkvmms||[]).push([[917],{7905:(e,t,r)=>{r.d(t,{e:()=>c});var o=r(7582),s=r(421),n=r(6391),i=r(2006),l=r(5607),a=r(4831);let c=class{constructor(){this.httpClient=(0,s.inject)(n.eN),this.tokenService=(0,s.inject)(a.Br),this.globalService=(0,s.inject)(a.Uh),this.router=(0,s.inject)(l.F0)}login(e,t){return this.httpClient.post("/obtain-token/",{host:"management",username:e,password:t}).pipe((0,i.b)((e=>{this.tokenService.setToken(e?.token),this.globalService.setCurrentUser(e?.user),this.router.navigateByUrl("/")})))}logout(){return this.httpClient.get("/logout/").pipe((0,i.b)((()=>{this.tokenService.clearToken(),this.globalService.setCurrentUser({}),this.router.navigateByUrl("/auth")})))}};c=(0,o.gn)([(0,s.Injectable)({providedIn:"root"})],c)},3917:(e,t,r)=>{r.r(t),r.d(t,{AuthModule:()=>m});var o=r(7582),s=r(421),n=r(1196),i=r(7434),l=r(7905);let a=class{constructor(){this.formBuilder=(0,s.inject)(i.qu),this.authService=(0,s.inject)(l.e)}ngOnInit(){this.formGroup=this.formBuilder.group({username:["",i.kI.required],password:["",i.kI.required]})}login(){this.authService.login(this.formGroup.get("username")?.value,this.formGroup.get("password")?.value).subscribe()}};a=(0,o.gn)([(0,s.Component)({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.scss"]})],a);let c=class{};c=(0,o.gn)([(0,s.Component)({selector:"app-auth",templateUrl:"./auth.component.html",styleUrls:["./auth.component.scss"]})],c);var h=r(5607);const u=[{path:"",component:c,children:[{path:"login",component:a},{path:"**",redirectTo:"login"}]}];let p=class{};p=(0,o.gn)([(0,s.NgModule)({declarations:[],imports:[n.ez,h.Bz.forChild(u)],exports:[h.Bz]})],p);var g=r(4831);let m=class{};m=(0,o.gn)([(0,s.NgModule)({declarations:[a,c],imports:[n.ez,i.UX,h.lC,p,g.hd]})],m)}}]);